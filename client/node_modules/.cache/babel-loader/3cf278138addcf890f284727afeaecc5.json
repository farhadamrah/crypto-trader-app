{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FARHAD\\\\Documents\\\\GitHub\\\\crypto-trader\\\\client\\\\src\\\\components\\\\Settings\\\\AccountSettings\\\\AccountSettings.js\",\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport Input from '../../shared/Input/Input';\nimport Button from '../../shared/Button/Button';\nimport { BUTTON_TYPES, MESSAGE_TYPE, ROUTES } from '../../../config/constants';\nimport FormItem from '../../shared/Form/FormItem/FormItem';\nimport { useForm } from 'react-hook-form';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { deleteUser, updateUser } from '../../../redux/actions/users';\nimport { setUserLoggedOut } from '../../../redux/actions/auth';\nimport { deleteAuthToken } from '../../../utils/auth';\nimport classNames from 'classnames';\nimport { showMessageComponent } from '../../../redux/actions/components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AccountSettings = props => {\n  _s();\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const user = useSelector(state => state.auth.user);\n  const {\n    register: registerFormField,\n    handleSubmit,\n    reset,\n    formState: {\n      isDirty: hasUnsavedChanged\n    }\n  } = useForm({\n    defaultValues: {\n      first_name: user.first_name,\n      last_name: user.last_name,\n      email: user.email,\n      api_key: user.api_key,\n      secret_key: user.secret_key\n    }\n  });\n  const [isEditing, setIsEditing] = useState(false);\n\n  const toggleIsEditing = () => {\n    setIsEditing(isEditing => !isEditing);\n  };\n\n  const onEditClick = () => {\n    toggleIsEditing();\n  };\n\n  const onDiscardClick = () => {\n    reset(user);\n    toggleIsEditing();\n  };\n\n  const onSaveClick = async values => {\n    if (!hasUnsavedChanged) return;\n    const updatedUser = await dispatch(updateUser({\n      id: user.id,\n      ...values\n    }));\n\n    if (updatedUser) {\n      reset(updatedUser);\n      toggleIsEditing();\n    }\n  };\n\n  const onDeleteAccountClick = async () => {\n    const deletedUser = await dispatch(deleteUser(user.id));\n\n    if (deletedUser) {\n      dispatch(setUserLoggedOut());\n      deleteAuthToken();\n      history.push(ROUTES.login.path);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl text-gray-800 font-medium pb-6 mb-10 border-b border-gray-300\",\n      children: \"Account Settings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-5 rounded-md shadow mb-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-7 text-xl text-gray-800\",\n          children: \"Personal Information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:flex mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col sm:w-1/2 sm:mr-6 mb-6 sm:mb-0\",\n              children: /*#__PURE__*/_jsxDEV(FormItem, {\n                label: 'First name',\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  className: 'border-gray-200 text-gray-700 w-full',\n                  type: 'text',\n                  placeholder: 'First name',\n                  disabled: !isEditing,\n                  ...registerFormField('first_name')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col sm:w-1/2\",\n              children: /*#__PURE__*/_jsxDEV(FormItem, {\n                label: 'Last Name',\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  className: 'border-gray-200 text-gray-700 w-full',\n                  type: 'text',\n                  placeholder: 'Last name',\n                  disabled: !isEditing,\n                  ...registerFormField('last_name')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col\",\n            children: /*#__PURE__*/_jsxDEV(FormItem, {\n              label: 'Email',\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                className: 'border-gray-200 text-gray-700 w-full',\n                type: 'email',\n                placeholder: 'Email',\n                disabled: !isEditing,\n                ...registerFormField('email')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-5 rounded-md shadow mb-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-7 text-xl text-black\",\n          children: \"Binance API\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sm:flex mb-7\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col sm:w-1/2 sm:mr-6 mb-6\",\n            children: /*#__PURE__*/_jsxDEV(FormItem, {\n              label: 'API key',\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                className: 'border-gray-200 text-gray-700 w-full',\n                type: 'text',\n                placeholder: 'API key',\n                disabled: !isEditing,\n                ...registerFormField('api_key')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col sm:w-1/2\",\n            children: /*#__PURE__*/_jsxDEV(FormItem, {\n              label: 'Secret Key',\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                className: 'border-gray-200 text-gray-700 w-full',\n                type: 'text',\n                placeholder: 'Secret Key',\n                disabled: !isEditing,\n                ...registerFormField('secret_key')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: 'bg-red-600 hover:bg-red-700 focus:bg-red-700 w-40 justify-self-end',\n          type: BUTTON_TYPES.primary,\n          disabled: true,\n          onClick: onDeleteAccountClick,\n          children: \"Delete Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-t border-gray-300 pt-8 mt-9\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end\",\n        children: [!isEditing && /*#__PURE__*/_jsxDEV(Button, {\n          className: 'w-56 rounded bg-indigo-700',\n          type: 'primary',\n          onClick: onEditClick,\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classNames('flex justify-end w-full xl:w-10/12', {\n            hidden: !isEditing\n          }),\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            type: 'link',\n            onClick: onDiscardClick,\n            children: \"Discard changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: 'w-32 ml-6 lg:w-56 rounded bg-indigo-700',\n            type: 'primary',\n            htmlType: 'submit',\n            disabled: !hasUnsavedChanged,\n            onClick: () => handleSubmit(onSaveClick)(),\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AccountSettings, \"VboQb2Nf9I+lxS3ip5S0EM11peY=\", false, function () {\n  return [useDispatch, useHistory, useSelector, useForm];\n});\n\n_c = AccountSettings;\nAccountSettings.propTypes = {};\nexport default AccountSettings;\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountSettings\");","map":{"version":3,"sources":["C:/Users/FARHAD/Documents/GitHub/crypto-trader/client/src/components/Settings/AccountSettings/AccountSettings.js"],"names":["PropTypes","useState","Input","Button","BUTTON_TYPES","MESSAGE_TYPE","ROUTES","FormItem","useForm","useHistory","useDispatch","useSelector","deleteUser","updateUser","setUserLoggedOut","deleteAuthToken","classNames","showMessageComponent","AccountSettings","props","dispatch","history","user","state","auth","register","registerFormField","handleSubmit","reset","formState","isDirty","hasUnsavedChanged","defaultValues","first_name","last_name","email","api_key","secret_key","isEditing","setIsEditing","toggleIsEditing","onEditClick","onDiscardClick","onSaveClick","values","updatedUser","id","onDeleteAccountClick","deletedUser","push","login","path","primary","hidden","propTypes"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { useState } from 'react';\r\nimport Input from '../../shared/Input/Input';\r\nimport Button from '../../shared/Button/Button';\r\nimport { BUTTON_TYPES, MESSAGE_TYPE, ROUTES } from '../../../config/constants';\r\nimport FormItem from '../../shared/Form/FormItem/FormItem';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { deleteUser, updateUser } from '../../../redux/actions/users';\r\nimport { setUserLoggedOut } from '../../../redux/actions/auth';\r\nimport { deleteAuthToken } from '../../../utils/auth';\r\nimport classNames from 'classnames';\r\nimport { showMessageComponent } from '../../../redux/actions/components';\r\n\r\nconst AccountSettings = props => {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    const user = useSelector(state => state.auth.user);\r\n\r\n    const {\r\n        register: registerFormField,\r\n        handleSubmit,\r\n        reset,\r\n        formState: { isDirty: hasUnsavedChanged },\r\n    } = useForm({\r\n        defaultValues: {\r\n            first_name: user.first_name,\r\n            last_name: user.last_name,\r\n            email: user.email,\r\n            api_key: user.api_key,\r\n            secret_key: user.secret_key,\r\n        },\r\n    });\r\n\r\n    const [isEditing, setIsEditing] = useState(false);\r\n\r\n    const toggleIsEditing = () => {\r\n        setIsEditing(isEditing => !isEditing);\r\n    };\r\n\r\n    const onEditClick = () => {\r\n        toggleIsEditing();\r\n    };\r\n\r\n    const onDiscardClick = () => {\r\n        reset(user);\r\n        toggleIsEditing();\r\n    };\r\n\r\n    const onSaveClick = async values => {\r\n        if (!hasUnsavedChanged) return;\r\n\r\n        const updatedUser = await dispatch(updateUser({ id: user.id, ...values }));\r\n\r\n        if (updatedUser) {\r\n            reset(updatedUser);\r\n            toggleIsEditing();\r\n        }\r\n    };\r\n\r\n    const onDeleteAccountClick = async () => {\r\n        const deletedUser = await dispatch(deleteUser(user.id));\r\n\r\n        if (deletedUser) {\r\n            dispatch(setUserLoggedOut());\r\n            deleteAuthToken();\r\n            history.push(ROUTES.login.path);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className='h-full flex flex-col'>\r\n            <h1 className='text-2xl text-gray-800 font-medium pb-6 mb-10 border-b border-gray-300'>Account Settings</h1>\r\n            <div>\r\n                <div className='bg-white p-5 rounded-md shadow mb-10'>\r\n                    <h2 className='mb-7 text-xl text-gray-800'>Personal Information</h2>\r\n                    <div className='flex-col'>\r\n                        <div className='sm:flex mb-6'>\r\n                            <div className='flex flex-col sm:w-1/2 sm:mr-6 mb-6 sm:mb-0'>\r\n                                <FormItem label={'First name'}>\r\n                                    <Input\r\n                                        className={'border-gray-200 text-gray-700 w-full'}\r\n                                        type={'text'}\r\n                                        placeholder={'First name'}\r\n                                        disabled={!isEditing}\r\n                                        {...registerFormField('first_name')}\r\n                                    />\r\n                                </FormItem>\r\n                            </div>\r\n                            <div className='flex flex-col sm:w-1/2'>\r\n                                <FormItem label={'Last Name'}>\r\n                                    <Input\r\n                                        className={'border-gray-200 text-gray-700 w-full'}\r\n                                        type={'text'}\r\n                                        placeholder={'Last name'}\r\n                                        disabled={!isEditing}\r\n                                        {...registerFormField('last_name')}\r\n                                    />\r\n                                </FormItem>\r\n                            </div>\r\n                        </div>\r\n                        <div className='flex flex-col'>\r\n                            <FormItem label={'Email'}>\r\n                                <Input\r\n                                    className={'border-gray-200 text-gray-700 w-full'}\r\n                                    type={'email'}\r\n                                    placeholder={'Email'}\r\n                                    disabled={!isEditing}\r\n                                    {...registerFormField('email')}\r\n                                />\r\n                            </FormItem>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='bg-white p-5 rounded-md shadow mb-10'>\r\n                    <h2 className='mb-7 text-xl text-black'>Binance API</h2>\r\n                    <div className='sm:flex mb-7'>\r\n                        <div className='flex flex-col sm:w-1/2 sm:mr-6 mb-6'>\r\n                            <FormItem label={'API key'}>\r\n                                <Input\r\n                                    className={'border-gray-200 text-gray-700 w-full'}\r\n                                    type={'text'}\r\n                                    placeholder={'API key'}\r\n                                    disabled={!isEditing}\r\n                                    {...registerFormField('api_key')}\r\n                                />\r\n                            </FormItem>\r\n                        </div>\r\n                        <div className='flex flex-col sm:w-1/2'>\r\n                            <FormItem label={'Secret Key'}>\r\n                                <Input\r\n                                    className={'border-gray-200 text-gray-700 w-full'}\r\n                                    type={'text'}\r\n                                    placeholder={'Secret Key'}\r\n                                    disabled={!isEditing}\r\n                                    {...registerFormField('secret_key')}\r\n                                />\r\n                            </FormItem>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='flex justify-end'>\r\n                    <Button\r\n                        className={'bg-red-600 hover:bg-red-700 focus:bg-red-700 w-40 justify-self-end'}\r\n                        type={BUTTON_TYPES.primary}\r\n                        disabled\r\n                        onClick={onDeleteAccountClick}\r\n                    >\r\n                        Delete Account\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n            <div className='border-t border-gray-300 pt-8 mt-9'>\r\n                <div className='flex justify-end'>\r\n                    {!isEditing && (\r\n                        <Button className={'w-56 rounded bg-indigo-700'} type={'primary'} onClick={onEditClick}>\r\n                            Edit\r\n                        </Button>\r\n                    )}\r\n\r\n                    <div\r\n                        className={classNames('flex justify-end w-full xl:w-10/12', {\r\n                            hidden: !isEditing,\r\n                        })}\r\n                    >\r\n                        <Button type={'link'} onClick={onDiscardClick}>\r\n                            Discard changes\r\n                        </Button>\r\n                        <Button\r\n                            className={'w-32 ml-6 lg:w-56 rounded bg-indigo-700'}\r\n                            type={'primary'}\r\n                            htmlType={'submit'}\r\n                            disabled={!hasUnsavedChanged}\r\n                            onClick={() => handleSubmit(onSaveClick)()}\r\n                        >\r\n                            Save\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nAccountSettings.propTypes = {};\r\n\r\nexport default AccountSettings;\r\n"]},"metadata":{},"sourceType":"module"}